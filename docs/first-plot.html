<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 5 Making your first plot | Data Visualization</title>
<meta name="author" content="Andrew Irwin">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.2"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.6.4/header-attrs.js"></script><script src="libs/jquery-3.5.1/jquery-3.5.1.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.5.3/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.5.3/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.2.3.9000/tabs.js"></script><script src="libs/bs3compat-0.2.3.9000/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script><script src="libs/plotly-binding-4.9.3/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet">
<script src="libs/crosstalk-1.1.0.1/js/crosstalk.min.js"></script><link href="libs/plotly-htmlwidgets-css-1.57.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-1.57.1/plotly-latest.min.js"></script><link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="libs/leaflet-1.3.1/leaflet.js"></script><link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="libs/proj4-2.6.2/proj4.min.js"></script><script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script><link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="libs/leaflet-binding-2.0.4.1/leaflet.js"></script><script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/mark.js@8.11.1/dist/mark.min.js"></script><!-- CSS -->
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Data Visualization</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome</a></li>
<li><a class="" href="syllabus.html">Syllabus</a></li>
<li><a class="" href="outline.html">Detailed outline</a></li>
<li><a class="" href="sync.html">Synchronous meeting agendas</a></li>
<li><a class="" href="evaluation.html">Evaluation</a></li>
<li><a class="" href="ch-invitation.html"><span class="header-section-number">1</span> Invitation to Data Visualization</a></li>
<li><a class="" href="ch-tools.html"><span class="header-section-number">2</span> Computer tools</a></li>
<li><a class="" href="setup.html"><span class="header-section-number">3</span> Setting up your computer</a></li>
<li><a class="" href="look-data.html"><span class="header-section-number">4</span> Look at Data</a></li>
<li><a class="active" href="first-plot.html"><span class="header-section-number">5</span> Making your first plot</a></li>
<li><a class="" href="vcs.html"><span class="header-section-number">6</span> What is version control software?</a></li>
<li><a class="" href="grammar.html"><span class="header-section-number">7</span> Grammar of Graphics</a></li>
<li><a class="" href="ggplot.html"><span class="header-section-number">8</span> Using the grammar of graphics</a></li>
<li><a class="" href="summarizing-data.html"><span class="header-section-number">9</span> Summarizing data</a></li>
<li><a class="" href="facets.html"><span class="header-section-number">10</span> Facetted graphs</a></li>
<li><a class="" href="reading-data.html"><span class="header-section-number">11</span> Reading data</a></li>
<li><a class="" href="pivot.html"><span class="header-section-number">12</span> Reshaping data</a></li>
<li><a class="" href="format-tables.html"><span class="header-section-number">13</span> Format tables</a></li>
<li><a class="" href="help.html"><span class="header-section-number">14</span> Getting help and asking questions</a></li>
<li><a class="" href="working-models.html"><span class="header-section-number">15</span> Working with models</a></li>
<li><a class="" href="linear-models.html"><span class="header-section-number">16</span> Linear models</a></li>
<li><a class="" href="smoothing.html"><span class="header-section-number">17</span> GAM and LOESS smoothing</a></li>
<li><a class="" href="collaboration.html"><span class="header-section-number">18</span> Collaborating with GitHub</a></li>
<li><a class="" href="data-sources.html"><span class="header-section-number">19</span> Finding and accessing data</a></li>
<li><a class="" href="reproduce.html"><span class="header-section-number">20</span> Reproducible reports</a></li>
<li><a class="" href="pca.html"><span class="header-section-number">21</span> Principal component analysis</a></li>
<li><a class="" href="mds.html"><span class="header-section-number">22</span> Multidimensional scaling</a></li>
<li><a class="" href="k-means.html"><span class="header-section-number">23</span> K-means clustering</a></li>
<li><a class="" href="slides.html"><span class="header-section-number">24</span> Making slides for presentations</a></li>
<li><a class="" href="testing.html"><span class="header-section-number">25</span> Checking your work</a></li>
<li><a class="" href="dynamic.html"><span class="header-section-number">26</span> Dynamic graphics</a></li>
<li><a class="" href="mapping-1.html"><span class="header-section-number">27</span> Making maps</a></li>
<li><a class="" href="mapping-2.html"><span class="header-section-number">28</span> Mapping part two</a></li>
<li><a class="" href="mapping-3.html"><span class="header-section-number">29</span> Alternatives to maps</a></li>
<li><a class="" href="factors-dates.html"><span class="header-section-number">30</span> Working with factors and dates</a></li>
<li><a class="" href="colour.html"><span class="header-section-number">31</span> Using colour well</a></li>
<li><a class="" href="theme.html"><span class="header-section-number">32</span> Themes</a></li>
<li><a class="" href="output-files.html"><span class="header-section-number">33</span> Graphics formatting</a></li>
<li><a class="" href="organization.html"><span class="header-section-number">34</span> Staying organized</a></li>
<li><a class="" href="r-details.html"><span class="header-section-number">35</span> More details about R</a></li>
<li><a class="" href="accessibility-bias-and-ethics.html"><span class="header-section-number">36</span> Accessibility, Bias, and Ethics</a></li>
<li><a class="" href="metadata.html">Metadata</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/AndrewIrwin/data-visualization">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="first-plot" class="section level1" number="5">
<h1>
<span class="header-section-number">5</span> Making your first plot<a class="anchor" aria-label="anchor" href="#first-plot"><i class="fas fa-link"></i></a>
</h1>
<div id="goals-5" class="section level2" number="5.1">
<h2>
<span class="header-section-number">5.1</span> Goals<a class="anchor" aria-label="anchor" href="#goals-5"><i class="fas fa-link"></i></a>
</h2>
<p>In this lesson I will show you how to create a basic plot and then demonstrate a sequence of refinements to the plot.</p>
<p>Your <a href="evaluation.html#task-b2">task</a> for this lesson is repeat the steps demonstrated here or in the accompanying video. Refer to <a href="https://socviz.co/gettingstarted.html#make-your-first-figure">Healy Section 2.6</a> for a different basic plot.</p>
</div>
<div id="introduction-3" class="section level2" number="5.2">
<h2>
<span class="header-section-number">5.2</span> Introduction<a class="anchor" aria-label="anchor" href="#introduction-3"><i class="fas fa-link"></i></a>
</h2>
<p>In this lesson you will start to learn how to use ggplot to visualize data. There is one simple example with several exercises, designed to make the essentials clear in your mind. All plots share the three features explained below, but many plots we draw later in the course are much more complex.</p>
<p>You can read these notes as a static document in a web browser, but it’s better to download the R markdown file <a href="https://raw.githubusercontent.com/AndrewIrwin/data-visualization/master/105-first-plot.rmd">here</a>, open it in Rstudio, and edit the examples as you read.</p>
</div>
<div id="required-elements-for-a-plot" class="section level2" number="5.3">
<h2>
<span class="header-section-number">5.3</span> Required elements for a plot<a class="anchor" aria-label="anchor" href="#required-elements-for-a-plot"><i class="fas fa-link"></i></a>
</h2>
<p>You need three elements to make a plot using ggplot:</p>
<ul>
<li>data, in the form of tidy data (a data frame or tibble in the language of R)</li>
<li>a mapping from variables in the data to features on the graph (e.g., position on the x- or y-axis, colour, shape, size)</li>
<li>the kind of graph to draw, such as a scatter plot, histogram, or bar chart.</li>
</ul>
</div>
<div id="your-first-plot" class="section level2" number="5.4">
<h2>
<span class="header-section-number">5.4</span> Your first plot<a class="anchor" aria-label="anchor" href="#your-first-plot"><i class="fas fa-link"></i></a>
</h2>
<p>We will use the <code>gapminder</code> data, which must be installed as part of the <code>gapminder</code> package and is adapted from the data at gapminder.org.</p>
<p>The function to create a plot is <code>ggplot</code>. You must specify the data (<code>gapminder</code>) and the mapping between various columns of the data and the features of the graph. Once these basics are established, we add (<code><a href="https://rdrr.io/r/base/Arithmetic.html">+</a></code>) one thing to the graph: an instruction to place a symbol at each x, y combination using the “geometry” <code>geom_point</code>.</p>
<p>We’ll have a lot more to say about how data are organized in tables later, but for now you can look at the data by typing <code><a href="https://rdrr.io/r/utils/View.html">View(gapminder)</a></code> in the Rstudio Console.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jennybc/gapminder">gapminder</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">gapminder</span>, 
       mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y<span class="op">=</span><span class="va">lifeExp</span>, x<span class="op">=</span><span class="va">gdpPercap</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="105-first-plot_files/figure-html/unnamed-chunk-2-1.png" width="672"></div>
</div>
<div id="improving-your-plot" class="section level2" number="5.5">
<h2>
<span class="header-section-number">5.5</span> Improving your plot<a class="anchor" aria-label="anchor" href="#improving-your-plot"><i class="fas fa-link"></i></a>
</h2>
<p>We’re going to revise the plot by building on these instructions. I’ll repeat the instructions above, but instead of displaying the figure, I will store the result in a variable (conventionally called <code>p</code> for plot to keep it simple, but you can use any name you like.) This will simplify the examples to follow, highlighting what makes each example different.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">gapminder</span>, 
       mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y<span class="op">=</span><span class="va">lifeExp</span>, x<span class="op">=</span><span class="va">gdpPercap</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>Add better labels to your plot using <code>labs</code> and <code>x</code>, <code>y</code>, <code>title</code>, <code>subtitle</code>, <code>tag</code>. My example has placeholder text. Get the R markdown file from <a href="https://raw.githubusercontent.com/AndrewIrwin/data-visualization/master/105-first-plot.rmd">here</a> and revise the figure to show sensible text in these spaces.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title<span class="op">=</span><span class="st">"Title here"</span>,
         subtitle<span class="op">=</span><span class="st">"A subtitle"</span>,
         x<span class="op">=</span><span class="st">"x axis label"</span>,
         y<span class="op">=</span><span class="st">"y axis label"</span>,
         caption<span class="op">=</span><span class="st">"A caption."</span>,
         tag<span class="op">=</span><span class="st">"A."</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="105-first-plot_files/figure-html/unnamed-chunk-4-1.png" width="672"></div>
<p>Almost everyone makes the text on their figures too small. How small is too small is obviously a matter of judgement, but it depends on your age (and vision), the medium (on screen for yourself, on a website, in a presentation, printed on paper), and whether the figure is made by you for you, or if you are trying to reach a wider audience. It’s essential to know how to make text bigger! Many visual aspects of a ggplot can be controlled as part of the <code>theme</code>; we will introduce these gradually throughout the course and summarize some of the most important themes in a lesson near the end of the course.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>size<span class="op">=</span><span class="fl">18</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="105-first-plot_files/figure-html/unnamed-chunk-5-1.png" width="672"></div>
<p>Let’s make a simple use of colour. There are many countries, so that’s not a good choice for a colour feature – there will be too many to distinguish. Let’s colour points by continent. All we need to do is to link the variable <code>continent</code> to the colour aesthetic.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color<span class="op">=</span><span class="va">continent</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="105-first-plot_files/figure-html/unnamed-chunk-6-1.png" width="672"></div>
<p>Gross domestic product varies widely across countries. The uneven spread over the x-axis makes the visualization hard to read. It’s got a couple of other features, notably the fact that it is always bigger than 0 and that we tend to be interested in multiplicative comparisons, that mean a log-transformation makes a better plot. (This is debatable if you are not used to reading or noticing log scales. Log scales are very useful and well worth the trouble to learn about, so put that on your “to do list” if you haven’t learned how to read them yet.) ggplot makes changing the scale farily easily, at least for a few special cases. The stuff in brackets after <code>scale_x_log10</code> is optional and makes the labels look a bit prettier. (Notice we’re using a function from a new package here.)</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://scales.r-lib.org">scales</a></span><span class="op">)</span>
<span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_log10</a></span><span class="op">(</span>labels <span class="op">=</span> <span class="fu"><a href="https://scales.r-lib.org//reference/trans_format.html">trans_format</a></span><span class="op">(</span><span class="st">'log10'</span>, <span class="fu"><a href="https://scales.r-lib.org//reference/label_parse.html">math_format</a></span><span class="op">(</span><span class="fl">10</span><span class="op">^</span><span class="va">.x</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="105-first-plot_files/figure-html/unnamed-chunk-7-1.png" width="672"></div>
<p>This formatting of the numbers on the x-axis is a bit tricky to get right and to explain. In fact its the sort of thing you might keep in a file of examples if, like me, you really don’t like to see <span class="math inline">\(10^3\)</span> formatted as <span class="math inline">\(1.0e3\)</span>. (Try <code>labels = scientific</code> to see this other format.)</p>
</div>
<div id="exercises" class="section level2" number="5.6">
<h2>
<span class="header-section-number">5.6</span> Exercises<a class="anchor" aria-label="anchor" href="#exercises"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>Combine several features of the examples above into one example: colour, log scale on the x axis, better axis labels and titles, and of course changing the text size.</li>
<li>Repeat these examples using variables of your choice from the <code>penguins</code> data from the package <code>palmerpenguins</code>
</li>
</ul>
</div>
<div id="further-reading-2" class="section level2" number="5.7">
<h2>
<span class="header-section-number">5.7</span> Further reading<a class="anchor" aria-label="anchor" href="#further-reading-2"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li><a href="https://socviz.co/gettingstarted.html#gettingstarted">Healy Section 2.5-2.6</a></li>
<li>For more on aesthetics and mappings from data to visualizations, see <a href="https://clauswilke.com/dataviz/aesthetic-mapping.html">Wilke Chapter 2</a>
</li>
</ul>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="look-data.html"><span class="header-section-number">4</span> Look at Data</a></div>
<div class="next"><a href="vcs.html"><span class="header-section-number">6</span> What is version control software?</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#first-plot"><span class="header-section-number">5</span> Making your first plot</a></li>
<li><a class="nav-link" href="#goals-5"><span class="header-section-number">5.1</span> Goals</a></li>
<li><a class="nav-link" href="#introduction-3"><span class="header-section-number">5.2</span> Introduction</a></li>
<li><a class="nav-link" href="#required-elements-for-a-plot"><span class="header-section-number">5.3</span> Required elements for a plot</a></li>
<li><a class="nav-link" href="#your-first-plot"><span class="header-section-number">5.4</span> Your first plot</a></li>
<li><a class="nav-link" href="#improving-your-plot"><span class="header-section-number">5.5</span> Improving your plot</a></li>
<li><a class="nav-link" href="#exercises"><span class="header-section-number">5.6</span> Exercises</a></li>
<li><a class="nav-link" href="#further-reading-2"><span class="header-section-number">5.7</span> Further reading</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/AndrewIrwin/data-visualization/blob/master/105-first-plot.rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/AndrewIrwin/data-visualization/edit/master/105-first-plot.rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Data Visualization</strong>" was written by Andrew Irwin. It was last built on 2021-03-02.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>
</html>
