<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 15 Data Abstracts and Dictionaries | Data Visualization</title>
<meta name="author" content="Andrew Irwin">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.2"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.6.4/header-attrs.js"></script><script src="libs/jquery-3.5.1/jquery-3.5.1.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.5.3/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.5.3/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.2.3.9000/tabs.js"></script><script src="libs/bs3compat-0.2.3.9000/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/mark.js@8.11.1/dist/mark.min.js"></script><!-- CSS -->
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Data Visualization</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> Welcome</a></li>
<li><a class="" href="syllabus.html"><span class="header-section-number">2</span> Syllabus</a></li>
<li><a class="" href="outline.html"><span class="header-section-number">3</span> Detailed outline</a></li>
<li><a class="" href="sync.html"><span class="header-section-number">4</span> Synchronous meeting agendas</a></li>
<li><a class="" href="evaluation.html"><span class="header-section-number">5</span> Evaluation</a></li>
<li><a class="" href="ch-invitation.html"><span class="header-section-number">6</span> Invitation to Data Visualization</a></li>
<li><a class="" href="ch-tools.html"><span class="header-section-number">7</span> Computer tools</a></li>
<li><a class="" href="setup.html"><span class="header-section-number">8</span> Setting up your computer</a></li>
<li><a class="" href="look-data.html"><span class="header-section-number">9</span> Look at Data</a></li>
<li><a class="" href="first-plot.html"><span class="header-section-number">10</span> Making your first plot</a></li>
<li><a class="" href="vcs.html"><span class="header-section-number">11</span> What is version control software?</a></li>
<li><a class="" href="grammar.html"><span class="header-section-number">12</span> Grammar of Graphics</a></li>
<li><a class="" href="ggplot.html"><span class="header-section-number">13</span> Using the grammar of graphics</a></li>
<li><a class="" href="linear-models.html"><span class="header-section-number">14</span> Linear models</a></li>
<li><a class="active" href="data.html"><span class="header-section-number">15</span> Data Abstracts and Dictionaries</a></li>
<li><a class="" href="organization.html"><span class="header-section-number">16</span> Staying organized</a></li>
<li><a class="" href="accessibility-bias-and-ethics.html"><span class="header-section-number">17</span> Accessibility, Bias, and Ethics</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/AndrewIrwin/data-visualization">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="data" class="section level1" number="15">
<h1>
<span class="header-section-number">15</span> Data Abstracts and Dictionaries<a class="anchor" aria-label="anchor" href="#data"><i class="fas fa-link"></i></a>
</h1>
<pre><code>## 
## Attaching package: 'lubridate'</code></pre>
<pre><code>## The following objects are masked from 'package:base':
## 
##     date, intersect, setdiff, union</code></pre>
<pre><code>## 
## Attaching package: 'skimr'</code></pre>
<pre><code>## The following object is masked from 'package:naniar':
## 
##     n_complete</code></pre>
<p>A data abstract is a short descriptive paragraph that provides the essential facts about the dataset including the who, what, where, when, why,
and how of the data, a quantitiative summary of the most important features (the number and type of variables, the number of observations, the range of key quantitative variables, and the levels or number of levels of key categorical variables.) A data dictionary lists all the variables by variable name from the dataset, providing a type (categorical, quantitative, date, etc.), units if applicable, a longer description, and key notations such as method of collection, number of missing data, or other notable feature.</p>
<div id="palmer-penguins" class="section level2" number="15.1">
<h2>
<span class="header-section-number">15.1</span> Palmer Penguins<a class="anchor" aria-label="anchor" href="#palmer-penguins"><i class="fas fa-link"></i></a>
</h2>
<p>The Palmer Penguins package provides a dataset <code>penguins</code> with biometric data (flipper and bill dimensions, body mass) for 344 observations over three species of penguin observed on three islands in archipelago along the the West Antarctic Peninsula. The data were obtained as part of the US NSF Palmer LTER program between 2007 and 2009. Additional data including additional morphometrics, reproductive success, and carbon and nitrogen stable isotopic composition of blood samples from adults is in the <code>penguins_raw</code> data.</p>
<div class="figure">
<span id="fig:unnamed-chunk-49"></span>
<img src="course-notes_files/figure-html/unnamed-chunk-49-1.png" alt="Number of missing observations of each variable from the `penguins` dataset." width="672"><p class="caption">
Figure 15.1: Number of missing observations of each variable from the <code>penguins</code> dataset.
</p>
</div>
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># codebook(penguins)  # not sure this works or does anythign interesting. Can create a csv file to document the dataset.</span></code></pre></div>
<p>Citation: Allison Marie Horst and Alison Presmanes Hill and Kristen B Gorman (2020) palmerpenguins: Palmer Archipelago (Antarctica) penguin data. version 0.1.0, <a href="https://allisonhorst.github.io/palmerpenguins/" class="uri">https://allisonhorst.github.io/palmerpenguins/</a></p>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/include_graphics.html">include_graphics</a></span><span class="op">(</span><span class="st">"static/torgerson-landscape-adelie-colonies.jpg"</span><span class="op">)</span></code></pre></div>
<div class="figure">
<span id="fig:unnamed-chunk-51"></span>
<img src="static/torgerson-landscape-adelie-colonies.jpg" alt="Adelie penguin colonies on Torgerson Island (Andrew Irwin, January 2012)" width="1294"><p class="caption">
Figure 15.2: Adelie penguin colonies on Torgerson Island (Andrew Irwin, January 2012)
</p>
</div>
</div>
<div id="environment-canada-weather-data-for-selected-cities" class="section level2" number="15.2">
<h2>
<span class="header-section-number">15.2</span> Environment Canada Weather Data for Selected Cities<a class="anchor" aria-label="anchor" href="#environment-canada-weather-data-for-selected-cities"><i class="fas fa-link"></i></a>
</h2>
<p>Meterological data obtained from Environment Canada for several cities in Canada (Vancouver, Calgary, Winnipeg, Toronto, Montreal, Halifax) using the <code>weathercan</code> package. Data are provided for XX years in both hourly and daily time resolutions. The variables differ somewhat between the two tables. The <code>glossary</code> function provides a data dictionary.</p>
<p>How the data were collected.</p>
<p>First we obtained the station IDs for select airports reporting hourly and daily data.</p>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">selected_stations</span> <span class="op">&lt;-</span> <span class="va">stations</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">TC_id</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"YVR"</span>, <span class="st">"YYC"</span>, <span class="st">"YWG"</span>, <span class="st">"YYZ"</span>, <span class="st">"YUL"</span>, <span class="st">"YHZ"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">interval</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"day"</span>, <span class="st">"hour"</span><span class="op">)</span><span class="op">)</span>
<span class="va">download_big_files</span> <span class="op">=</span> <span class="cn">FALSE</span>
<span class="kw">if</span> <span class="op">(</span><span class="va">download_big_files</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">selected_weather_hour</span> <span class="op">&lt;-</span> <span class="fu">weather_dl</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">selected_stations</span><span class="op">$</span><span class="va">station_id</span><span class="op">)</span>, interval<span class="op">=</span><span class="st">"hour"</span><span class="op">)</span> <span class="co"># takes a while to download data!</span>
  <span class="va">selected_weather_day</span> <span class="op">&lt;-</span> <span class="fu">weather_dl</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">selected_stations</span><span class="op">$</span><span class="va">station_id</span><span class="op">)</span>, interval<span class="op">=</span><span class="st">"day"</span><span class="op">)</span> <span class="co"># takes a while to download data!</span>
  <span class="fu">write_csv</span><span class="op">(</span><span class="va">selected_weather_day</span>, <span class="st">"static/selected_weather_day.csv"</span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">saveRDS</a></span><span class="op">(</span><span class="va">selected_weather_day</span>, <span class="st">"static/selected_weather_day.rds"</span><span class="op">)</span>
  <span class="fu">write_csv</span><span class="op">(</span><span class="va">selected_weather_hour</span>, <span class="st">"static/selected_weather_hour.csv"</span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">saveRDS</a></span><span class="op">(</span><span class="va">selected_weather_hour</span>, <span class="st">"static/selected_weather_hour.rds"</span><span class="op">)</span>
<span class="op">}</span> <span class="kw">else</span> <span class="op">{</span>
  <span class="va">selected_weather_day</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">readRDS</a></span><span class="op">(</span><span class="st">"static/selected_weather_day.rds"</span><span class="op">)</span>
  <span class="va">selected_weather_hour</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">readRDS</a></span><span class="op">(</span><span class="st">"static/selected_weather_hour.rds"</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>Compute quantiles of windspeed for each of 36 directions</p>
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">selected_weather_hour</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">TC_id</span> <span class="op">==</span> <span class="st">"YHZ"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">group_by</span><span class="op">(</span><span class="va">wind_dir</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">wind_spd</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">wind_dir</span> <span class="op">!=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">summarize</span><span class="op">(</span>wind_min <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">wind_spd</span><span class="op">)</span>, wind_max <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">wind_spd</span><span class="op">)</span>, wind_median <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">wind_spd</span><span class="op">)</span>,
                                     wind_10 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">wind_spd</span>, <span class="fl">0.10</span><span class="op">)</span>, wind_90 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">wind_spd</span>, <span class="fl">0.90</span><span class="op">)</span>,
                                     wind_25 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">wind_spd</span>, <span class="fl">0.25</span><span class="op">)</span>, wind_75 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">wind_spd</span>, <span class="fl">0.75</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">10</span><span class="op">*</span><span class="va">wind_dir</span>, y <span class="op">=</span> <span class="va">wind_median</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">wind_75</span><span class="op">)</span>, color<span class="op">=</span><span class="st">"blue"</span>, linetype<span class="op">=</span><span class="fl">3</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">wind_25</span><span class="op">)</span>, color<span class="op">=</span><span class="st">"blue"</span>, linetype<span class="op">=</span><span class="fl">3</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_polar.html">coord_polar</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>## `summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<div class="inline-figure"><img src="course-notes_files/figure-html/unnamed-chunk-53-1.png" width="672"></div>
<p>Overview of data</p>
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">selected_weather_hour</span> <span class="op">%&gt;%</span> <span class="fu">slice_sample</span><span class="op">(</span>n<span class="op">=</span><span class="fl">1000</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">skim</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-table"><table class="table table-sm">
<caption>
<span id="tab:unnamed-chunk-54">Table 15.1: </span>Data summary</caption>
<tbody>
<tr class="odd">
<td align="left">Name</td>
<td align="left">Piped data</td>
</tr>
<tr class="even">
<td align="left">Number of rows</td>
<td align="left">1000</td>
</tr>
<tr class="odd">
<td align="left">Number of columns</td>
<td align="left">35</td>
</tr>
<tr class="even">
<td align="left">_______________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Column type frequency:</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">character</td>
<td align="left">19</td>
</tr>
<tr class="odd">
<td align="left">Date</td>
<td align="left">1</td>
</tr>
<tr class="even">
<td align="left">logical</td>
<td align="left">1</td>
</tr>
<tr class="odd">
<td align="left">numeric</td>
<td align="left">13</td>
</tr>
<tr class="even">
<td align="left">POSIXct</td>
<td align="left">1</td>
</tr>
<tr class="odd">
<td align="left">________________________</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">Group variables</td>
<td align="left">None</td>
</tr>
</tbody>
</table></div>
<p><strong>Variable type: character</strong></p>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">min</th>
<th align="right">max</th>
<th align="right">empty</th>
<th align="right">n_unique</th>
<th align="right">whitespace</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">station_name</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">14</td>
<td align="right">38</td>
<td align="right">0</td>
<td align="right">12</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">prov</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">6</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">climate_id</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">7</td>
<td align="right">7</td>
<td align="right">0</td>
<td align="right">14</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">WMO_id</td>
<td align="right">137</td>
<td align="right">0.86</td>
<td align="right">5</td>
<td align="right">5</td>
<td align="right">0</td>
<td align="right">6</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">TC_id</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">3</td>
<td align="right">3</td>
<td align="right">0</td>
<td align="right">6</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">year</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">4</td>
<td align="right">4</td>
<td align="right">0</td>
<td align="right">68</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">month</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">12</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">day</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">31</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">hour</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">5</td>
<td align="right">5</td>
<td align="right">0</td>
<td align="right">24</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">weather</td>
<td align="right">192</td>
<td align="right">0.81</td>
<td align="right">3</td>
<td align="right">32</td>
<td align="right">0</td>
<td align="right">39</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">hmdx_flag</td>
<td align="right">1000</td>
<td align="right">0.00</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">pressure_flag</td>
<td align="right">1000</td>
<td align="right">0.00</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">rel_hum_flag</td>
<td align="right">1000</td>
<td align="right">0.00</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">temp_dew_flag</td>
<td align="right">1000</td>
<td align="right">0.00</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">temp_flag</td>
<td align="right">1000</td>
<td align="right">0.00</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">visib_flag</td>
<td align="right">998</td>
<td align="right">0.00</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">wind_chill_flag</td>
<td align="right">1000</td>
<td align="right">0.00</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">wind_dir_flag</td>
<td align="right">999</td>
<td align="right">0.00</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">wind_spd_flag</td>
<td align="right">999</td>
<td align="right">0.00</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
</tbody>
</table></div>
<p><strong>Variable type: Date</strong></p>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="left">min</th>
<th align="left">max</th>
<th align="left">median</th>
<th align="right">n_unique</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">date</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">1953-01-31</td>
<td align="left">2020-11-09</td>
<td align="left">1991-04-27</td>
<td align="right">980</td>
</tr></tbody>
</table></div>
<p><strong>Variable type: logical</strong></p>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">mean</th>
<th align="left">count</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">station_operator</td>
<td align="right">1000</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="left">:</td>
</tr></tbody>
</table></div>
<p><strong>Variable type: numeric</strong></p>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">p0</th>
<th align="right">p25</th>
<th align="right">p50</th>
<th align="right">p75</th>
<th align="right">p100</th>
<th align="left">hist</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">station_id</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">10474.07</td>
<td align="right">16255.56</td>
<td align="right">889.00</td>
<td align="right">2205.00</td>
<td align="right">5097.00</td>
<td align="right">6358.00</td>
<td align="right">53938.00</td>
<td align="left">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td align="left">lat</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">47.50</td>
<td align="right">2.86</td>
<td align="right">43.68</td>
<td align="right">44.88</td>
<td align="right">49.20</td>
<td align="right">49.92</td>
<td align="right">51.12</td>
<td align="left">▆▃▁▃▇</td>
</tr>
<tr class="odd">
<td align="left">lon</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">-92.31</td>
<td align="right">20.43</td>
<td align="right">-123.18</td>
<td align="right">-114.02</td>
<td align="right">-97.23</td>
<td align="right">-73.75</td>
<td align="right">-63.50</td>
<td align="left">▇▁▅▅▇</td>
</tr>
<tr class="even">
<td align="left">elev</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">303.22</td>
<td align="right">379.00</td>
<td align="right">4.30</td>
<td align="right">36.00</td>
<td align="right">173.40</td>
<td align="right">238.70</td>
<td align="right">1099.10</td>
<td align="left">▇▂▁▁▂</td>
</tr>
<tr class="odd">
<td align="left">hmdx</td>
<td align="right">945</td>
<td align="right">0.06</td>
<td align="right">30.29</td>
<td align="right">4.09</td>
<td align="right">25.00</td>
<td align="right">27.00</td>
<td align="right">29.00</td>
<td align="right">32.00</td>
<td align="right">42.00</td>
<td align="left">▇▅▅▂▁</td>
</tr>
<tr class="even">
<td align="left">pressure</td>
<td align="right">130</td>
<td align="right">0.87</td>
<td align="right">97.93</td>
<td align="right">4.55</td>
<td align="right">86.71</td>
<td align="right">98.09</td>
<td align="right">99.52</td>
<td align="right">100.89</td>
<td align="right">103.73</td>
<td align="left">▃▁▁▇▆</td>
</tr>
<tr class="odd">
<td align="left">rel_hum</td>
<td align="right">130</td>
<td align="right">0.87</td>
<td align="right">71.54</td>
<td align="right">18.22</td>
<td align="right">13.00</td>
<td align="right">60.00</td>
<td align="right">75.00</td>
<td align="right">86.00</td>
<td align="right">100.00</td>
<td align="left">▁▂▅▇▇</td>
</tr>
<tr class="even">
<td align="left">temp</td>
<td align="right">130</td>
<td align="right">0.87</td>
<td align="right">5.94</td>
<td align="right">12.03</td>
<td align="right">-33.70</td>
<td align="right">-1.55</td>
<td align="right">7.20</td>
<td align="right">15.00</td>
<td align="right">32.20</td>
<td align="left">▁▂▆▇▂</td>
</tr>
<tr class="odd">
<td align="left">temp_dew</td>
<td align="right">130</td>
<td align="right">0.87</td>
<td align="right">0.59</td>
<td align="right">11.24</td>
<td align="right">-38.30</td>
<td align="right">-6.57</td>
<td align="right">2.20</td>
<td align="right">8.90</td>
<td align="right">24.10</td>
<td align="left">▁▂▆▇▃</td>
</tr>
<tr class="even">
<td align="left">visib</td>
<td align="right">132</td>
<td align="right">0.87</td>
<td align="right">27.43</td>
<td align="right">17.00</td>
<td align="right">0.00</td>
<td align="right">19.30</td>
<td align="right">24.10</td>
<td align="right">32.20</td>
<td align="right">80.50</td>
<td align="left">▃▇▁▂▁</td>
</tr>
<tr class="odd">
<td align="left">wind_chill</td>
<td align="right">758</td>
<td align="right">0.24</td>
<td align="right">-15.21</td>
<td align="right">9.45</td>
<td align="right">-42.00</td>
<td align="right">-20.00</td>
<td align="right">-12.50</td>
<td align="right">-8.00</td>
<td align="right">-1.00</td>
<td align="left">▂▂▅▇▇</td>
</tr>
<tr class="even">
<td align="left">wind_dir</td>
<td align="right">174</td>
<td align="right">0.83</td>
<td align="right">21.03</td>
<td align="right">10.11</td>
<td align="right">1.00</td>
<td align="right">14.00</td>
<td align="right">23.00</td>
<td align="right">30.00</td>
<td align="right">36.00</td>
<td align="left">▅▅▆▇▇</td>
</tr>
<tr class="odd">
<td align="left">wind_spd</td>
<td align="right">131</td>
<td align="right">0.87</td>
<td align="right">15.42</td>
<td align="right">9.54</td>
<td align="right">0.00</td>
<td align="right">9.00</td>
<td align="right">14.00</td>
<td align="right">21.00</td>
<td align="right">72.00</td>
<td align="left">▇▆▂▁▁</td>
</tr>
</tbody>
</table></div>
<p><strong>Variable type: POSIXct</strong></p>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="left">min</th>
<th align="left">max</th>
<th align="left">median</th>
<th align="right">n_unique</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">time</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">1953-01-31 23:00:00</td>
<td align="left">2020-11-09 03:00:00</td>
<td align="left">1991-04-27 04:30:00</td>
<td align="right">998</td>
</tr></tbody>
</table></div>
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">selected_weather_day</span> <span class="op">%&gt;%</span> <span class="fu">slice_sample</span><span class="op">(</span>n<span class="op">=</span><span class="fl">1000</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">skim</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-table"><table class="table table-sm">
<caption>
<span id="tab:unnamed-chunk-54">Table 15.1: </span>Data summary</caption>
<tbody>
<tr class="odd">
<td align="left">Name</td>
<td align="left">Piped data</td>
</tr>
<tr class="even">
<td align="left">Number of rows</td>
<td align="left">1000</td>
</tr>
<tr class="odd">
<td align="left">Number of columns</td>
<td align="left">37</td>
</tr>
<tr class="even">
<td align="left">_______________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Column type frequency:</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">character</td>
<td align="left">20</td>
</tr>
<tr class="odd">
<td align="left">Date</td>
<td align="left">1</td>
</tr>
<tr class="even">
<td align="left">logical</td>
<td align="left">1</td>
</tr>
<tr class="odd">
<td align="left">numeric</td>
<td align="left">15</td>
</tr>
<tr class="even">
<td align="left">________________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Group variables</td>
<td align="left">None</td>
</tr>
</tbody>
</table></div>
<p><strong>Variable type: character</strong></p>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">min</th>
<th align="right">max</th>
<th align="right">empty</th>
<th align="right">n_unique</th>
<th align="right">whitespace</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">station_name</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">14</td>
<td align="right">38</td>
<td align="right">0</td>
<td align="right">12</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">prov</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">6</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">climate_id</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">7</td>
<td align="right">7</td>
<td align="right">0</td>
<td align="right">14</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">WMO_id</td>
<td align="right">149</td>
<td align="right">0.85</td>
<td align="right">5</td>
<td align="right">5</td>
<td align="right">0</td>
<td align="right">6</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">TC_id</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">3</td>
<td align="right">3</td>
<td align="right">0</td>
<td align="right">6</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">year</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">4</td>
<td align="right">4</td>
<td align="right">0</td>
<td align="right">126</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">month</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">12</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">day</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">31</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">qual</td>
<td align="right">1000</td>
<td align="right">0.00</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">cool_deg_days_flag</td>
<td align="right">998</td>
<td align="right">0.00</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">dir_max_gust_flag</td>
<td align="right">952</td>
<td align="right">0.05</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">heat_deg_days_flag</td>
<td align="right">998</td>
<td align="right">0.00</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">max_temp_flag</td>
<td align="right">998</td>
<td align="right">0.00</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">mean_temp_flag</td>
<td align="right">998</td>
<td align="right">0.00</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">min_temp_flag</td>
<td align="right">998</td>
<td align="right">0.00</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">snow_grnd_flag</td>
<td align="right">954</td>
<td align="right">0.05</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">spd_max_gust_flag</td>
<td align="right">960</td>
<td align="right">0.04</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">total_precip_flag</td>
<td align="right">839</td>
<td align="right">0.16</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">total_rain_flag</td>
<td align="right">899</td>
<td align="right">0.10</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">total_snow_flag</td>
<td align="right">907</td>
<td align="right">0.09</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">0</td>
</tr>
</tbody>
</table></div>
<p><strong>Variable type: Date</strong></p>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="left">min</th>
<th align="left">max</th>
<th align="left">median</th>
<th align="right">n_unique</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">date</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">1882-01-26</td>
<td align="left">2020-11-20</td>
<td align="left">1982-08-14</td>
<td align="right">988</td>
</tr></tbody>
</table></div>
<p><strong>Variable type: logical</strong></p>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">mean</th>
<th align="left">count</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">station_operator</td>
<td align="right">1000</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="left">:</td>
</tr></tbody>
</table></div>
<p><strong>Variable type: numeric</strong></p>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">p0</th>
<th align="right">p25</th>
<th align="right">p50</th>
<th align="right">p75</th>
<th align="right">p100</th>
<th align="left">hist</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">station_id</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">8355.82</td>
<td align="right">14054.89</td>
<td align="right">889.00</td>
<td align="right">2205.00</td>
<td align="right">3698.00</td>
<td align="right">5415.00</td>
<td align="right">53938.00</td>
<td align="left">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td align="left">lat</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">47.80</td>
<td align="right">2.84</td>
<td align="right">43.68</td>
<td align="right">44.88</td>
<td align="right">49.20</td>
<td align="right">49.92</td>
<td align="right">51.12</td>
<td align="left">▆▃▁▃▇</td>
</tr>
<tr class="odd">
<td align="left">lon</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">-94.51</td>
<td align="right">20.78</td>
<td align="right">-123.18</td>
<td align="right">-114.02</td>
<td align="right">-97.23</td>
<td align="right">-73.75</td>
<td align="right">-63.50</td>
<td align="left">▇▁▅▃▆</td>
</tr>
<tr class="even">
<td align="left">elev</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">329.87</td>
<td align="right">402.35</td>
<td align="right">4.30</td>
<td align="right">36.00</td>
<td align="right">173.40</td>
<td align="right">238.70</td>
<td align="right">1099.10</td>
<td align="left">▇▃▁▁▃</td>
</tr>
<tr class="odd">
<td align="left">cool_deg_days</td>
<td align="right">122</td>
<td align="right">0.88</td>
<td align="right">0.38</td>
<td align="right">1.23</td>
<td align="right">0.00</td>
<td align="right">0.00</td>
<td align="right">0.00</td>
<td align="right">0.00</td>
<td align="right">8.70</td>
<td align="left">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td align="left">dir_max_gust</td>
<td align="right">653</td>
<td align="right">0.35</td>
<td align="right">22.08</td>
<td align="right">9.50</td>
<td align="right">1.00</td>
<td align="right">15.50</td>
<td align="right">25.00</td>
<td align="right">29.00</td>
<td align="right">36.00</td>
<td align="left">▂▃▃▇▅</td>
</tr>
<tr class="odd">
<td align="left">heat_deg_days</td>
<td align="right">122</td>
<td align="right">0.88</td>
<td align="right">12.92</td>
<td align="right">11.11</td>
<td align="right">0.00</td>
<td align="right">3.32</td>
<td align="right">11.35</td>
<td align="right">19.35</td>
<td align="right">52.20</td>
<td align="left">▇▅▂▁▁</td>
</tr>
<tr class="even">
<td align="left">max_temp</td>
<td align="right">122</td>
<td align="right">0.88</td>
<td align="right">10.53</td>
<td align="right">12.09</td>
<td align="right">-30.60</td>
<td align="right">2.80</td>
<td align="right">11.70</td>
<td align="right">20.10</td>
<td align="right">33.30</td>
<td align="left">▁▂▆▇▅</td>
</tr>
<tr class="odd">
<td align="left">mean_temp</td>
<td align="right">122</td>
<td align="right">0.88</td>
<td align="right">5.46</td>
<td align="right">11.61</td>
<td align="right">-34.20</td>
<td align="right">-1.35</td>
<td align="right">6.65</td>
<td align="right">14.67</td>
<td align="right">26.70</td>
<td align="left">▁▂▅▇▅</td>
</tr>
<tr class="even">
<td align="left">min_temp</td>
<td align="right">122</td>
<td align="right">0.88</td>
<td align="right">0.36</td>
<td align="right">11.51</td>
<td align="right">-42.20</td>
<td align="right">-5.77</td>
<td align="right">1.70</td>
<td align="right">9.40</td>
<td align="right">22.20</td>
<td align="left">▁▂▅▇▅</td>
</tr>
<tr class="odd">
<td align="left">snow_grnd</td>
<td align="right">402</td>
<td align="right">0.60</td>
<td align="right">2.98</td>
<td align="right">7.60</td>
<td align="right">0.00</td>
<td align="right">0.00</td>
<td align="right">0.00</td>
<td align="right">0.00</td>
<td align="right">64.00</td>
<td align="left">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td align="left">spd_max_gust</td>
<td align="right">652</td>
<td align="right">0.35</td>
<td align="right">47.14</td>
<td align="right">13.76</td>
<td align="right">31.00</td>
<td align="right">37.00</td>
<td align="right">43.00</td>
<td align="right">54.00</td>
<td align="right">103.00</td>
<td align="left">▇▃▂▁▁</td>
</tr>
<tr class="odd">
<td align="left">total_precip</td>
<td align="right">127</td>
<td align="right">0.87</td>
<td align="right">2.23</td>
<td align="right">6.30</td>
<td align="right">0.00</td>
<td align="right">0.00</td>
<td align="right">0.00</td>
<td align="right">1.00</td>
<td align="right">67.20</td>
<td align="left">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td align="left">total_rain</td>
<td align="right">136</td>
<td align="right">0.86</td>
<td align="right">1.91</td>
<td align="right">6.08</td>
<td align="right">0.00</td>
<td align="right">0.00</td>
<td align="right">0.00</td>
<td align="right">0.30</td>
<td align="right">67.20</td>
<td align="left">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td align="left">total_snow</td>
<td align="right">135</td>
<td align="right">0.86</td>
<td align="right">0.36</td>
<td align="right">1.87</td>
<td align="right">0.00</td>
<td align="right">0.00</td>
<td align="right">0.00</td>
<td align="right">0.00</td>
<td align="right">27.80</td>
<td align="left">▇▁▁▁▁</td>
</tr>
</tbody>
</table></div>
</div>
<div id="questions" class="section level2" number="15.3">
<h2>
<span class="header-section-number">15.3</span> Questions<a class="anchor" aria-label="anchor" href="#questions"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>What is the probability of snow / rain / preciptation today?</li>
<li>What is the distribution of mean temperature change from today to tomorrow?</li>
<li>What is the distribution of the temperature range (high - low) for today?</li>
<li>How many days this year had record highs or lows (compared to past 30 years)?</li>
<li>When is the last day of the year in winnipeg with no snow on the ground?</li>
</ul>
<div class="sourceCode" id="cb67"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">selected_weather_day</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">TC_id</span> <span class="op">==</span> <span class="st">"YWG"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">snow_grnd</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">group_by</span><span class="op">(</span><span class="va">year</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">summarize</span><span class="op">(</span>latest_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">mutate</span><span class="op">(</span>jd <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="http://lubridate.tidyverse.org/reference/day.html">yday</a></span><span class="op">(</span><span class="va">latest_date</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">jd</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Last day of the year with no snow"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_vline</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fu">yday</span><span class="op">(</span><span class="fu">ymd</span><span class="op">(</span><span class="st">"2020-10-31"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html">xlim</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="fl">365</span><span class="op">)</span></code></pre></div>
<pre><code>## `summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<pre><code>## Warning: Removed 1 rows containing missing values (geom_bar).</code></pre>
<div class="inline-figure"><img src="course-notes_files/figure-html/unnamed-chunk-55-1.png" width="672"></div>
<p>Fraction of the days each year after Halloween with no snow on the ground.</p>
<div class="sourceCode" id="cb71"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">selected_weather_day</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">TC_id</span> <span class="op">==</span> <span class="st">"YWG"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">mutate</span><span class="op">(</span>jd <span class="op">=</span> <span class="fu">yday</span><span class="op">(</span><span class="va">date</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">jd</span> <span class="op">&gt;</span> <span class="fu">yday</span><span class="op">(</span><span class="fu">ymd</span><span class="op">(</span><span class="st">"2020-10-31"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">group_by</span><span class="op">(</span><span class="va">year</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">summarize</span><span class="op">(</span>n_snow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">snow_grnd</span> <span class="op">&gt;</span> <span class="fl">0</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>,
            n_nosnow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">snow_grnd</span> <span class="op">==</span> <span class="fl">0</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>,
            n <span class="op">=</span> <span class="va">n_snow</span> <span class="op">+</span> <span class="va">n_nosnow</span>,
            f_snow <span class="op">=</span> <span class="va">n_snow</span><span class="op">/</span><span class="va">n</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">n</span> <span class="op">&gt;</span> <span class="fl">45</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">f_snow</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>binwidth<span class="op">=</span><span class="fl">0.1</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html">xlim</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Proportion of the last two months with snow on the ground"</span><span class="op">)</span> </code></pre></div>
<pre><code>## `summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<pre><code>## Warning: Removed 2 rows containing missing values (geom_bar).</code></pre>
<div class="inline-figure"><img src="course-notes_files/figure-html/unnamed-chunk-56-1.png" width="672"></div>
</div>
<div id="statistics-canada-data" class="section level2" number="15.4">
<h2>
<span class="header-section-number">15.4</span> Statistics Canada data<a class="anchor" aria-label="anchor" href="#statistics-canada-data"><i class="fas fa-link"></i></a>
</h2>
<p>Statistics Canada produces and distributes a huge number of datasets. These can be easily read into R using the <code>cansim</code> package. A good approach is to use the <a href="https://www150.statcan.gc.ca/n1/en/type/data">Statistics Canada</a> website to discover and explore the data you want, then come back to R with the table (or cansim) number.</p>
<div class="sourceCode" id="cb74"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/mountainMath/cansim">cansim</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>
<span class="va">pop</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://mountainmath.github.io/cansim/index.html/reference/get_cansim.html">get_cansim</a></span><span class="op">(</span><span class="st">"1710011501"</span><span class="op">)</span></code></pre></div>
<pre><code>## Accessing CANSIM NDM product 17-10-0115 from Statistics Canada</code></pre>
<pre><code>## Parsing data</code></pre>
<pre><code>## Folding in metadata</code></pre>
<div class="sourceCode" id="cb78"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pop1</span> <span class="op">&lt;-</span> <span class="va">pop</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">Statistics</span> <span class="op">==</span> <span class="st">"Population"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">`Age group`</span> <span class="op">==</span> <span class="st">"0 to 29 years old"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">GEO</span> <span class="op">!=</span> <span class="st">"Canada"</span><span class="op">)</span> 
<span class="va">pop1</span> <span class="op">%&gt;%</span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">REF_DATE</span>, y <span class="op">=</span> <span class="va">VALUE</span>, color<span class="op">=</span><span class="va">GEO</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>group<span class="op">=</span><span class="va">GEO</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Residents, age 0-29"</span>, y <span class="op">=</span> <span class="st">"Number"</span>, x <span class="op">=</span> <span class="st">"Year"</span>, subtitle<span class="op">=</span><span class="st">"Observed and projected"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="course-notes_files/figure-html/unnamed-chunk-57-1.png" width="672"></div>
<div class="sourceCode" id="cb79"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pop2</span> <span class="op">&lt;-</span> <span class="va">pop1</span> <span class="op">%&gt;%</span> <span class="fu">mutate</span><span class="op">(</span>region <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span><span class="va">GEO</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Nunavut"</span>, <span class="st">"Yukon"</span>, <span class="st">"Northwest Territories"</span><span class="op">)</span> <span class="op">~</span> <span class="st">"Territories"</span>,
                                   <span class="va">GEO</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"British Columbia"</span>, <span class="st">"Alberta"</span>, <span class="st">"Saskatchewan"</span>, <span class="st">"Manitoba"</span><span class="op">)</span> <span class="op">~</span> <span class="st">"West"</span>,
                                   <span class="va">GEO</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Newfoundland and Labrador"</span>, <span class="st">"Prince Edward Island"</span>, 
                                              <span class="st">"Nova Scotia"</span>, <span class="st">"New Brunswick"</span><span class="op">)</span> <span class="op">~</span> <span class="st">"Atlantic"</span>,
                                   <span class="cn">TRUE</span> <span class="op">~</span> <span class="st">"Central"</span><span class="op">)</span><span class="op">)</span> 
<span class="va">p1</span> <span class="op">&lt;-</span> <span class="va">pop2</span> <span class="op">%&gt;%</span>
  <span class="fu">group_by</span><span class="op">(</span><span class="va">REF_DATE</span>, <span class="va">region</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">summarise</span><span class="op">(</span>total <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">VALUE</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span> x<span class="op">=</span><span class="va">REF_DATE</span>, y <span class="op">=</span> <span class="va">total</span>, color <span class="op">=</span> <span class="va">region</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>group<span class="op">=</span><span class="va">region</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## `summarise()` regrouping output by 'REF_DATE' (override with `.groups` argument)</code></pre>
<div class="sourceCode" id="cb81"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">p1</span></code></pre></div>
<div class="inline-figure"><img src="course-notes_files/figure-html/unnamed-chunk-58-1.png" width="672"></div>
</div>
<div id="other-interesting-multivariate-data-for-analysis" class="section level2" number="15.5">
<h2>
<span class="header-section-number">15.5</span> Other interesting multivariate data for analysis<a class="anchor" aria-label="anchor" href="#other-interesting-multivariate-data-for-analysis"><i class="fas fa-link"></i></a>
</h2>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="linear-models.html"><span class="header-section-number">14</span> Linear models</a></div>
<div class="next"><a href="organization.html"><span class="header-section-number">16</span> Staying organized</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#data"><span class="header-section-number">15</span> Data Abstracts and Dictionaries</a></li>
<li><a class="nav-link" href="#palmer-penguins"><span class="header-section-number">15.1</span> Palmer Penguins</a></li>
<li><a class="nav-link" href="#environment-canada-weather-data-for-selected-cities"><span class="header-section-number">15.2</span> Environment Canada Weather Data for Selected Cities</a></li>
<li><a class="nav-link" href="#questions"><span class="header-section-number">15.3</span> Questions</a></li>
<li><a class="nav-link" href="#statistics-canada-data"><span class="header-section-number">15.4</span> Statistics Canada data</a></li>
<li><a class="nav-link" href="#other-interesting-multivariate-data-for-analysis"><span class="header-section-number">15.5</span> Other interesting multivariate data for analysis</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/AndrewIrwin/data-visualization/blob/master/305-data.rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/AndrewIrwin/data-visualization/edit/master/305-data.rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Data Visualization</strong>" was written by Andrew Irwin. It was last built on 2021-01-01.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>
</html>
