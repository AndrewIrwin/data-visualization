<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 25 Dynamic graphics | Data Visualization</title>
<meta name="author" content="Andrew Irwin">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.2"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.6.4/header-attrs.js"></script><script src="libs/jquery-3.5.1/jquery-3.5.1.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.5.3/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.5.3/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.2.3.9000/tabs.js"></script><script src="libs/bs3compat-0.2.3.9000/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script><script src="libs/plotly-binding-4.9.3/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet">
<script src="libs/crosstalk-1.1.0.1/js/crosstalk.min.js"></script><link href="libs/plotly-htmlwidgets-css-1.57.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-1.57.1/plotly-latest.min.js"></script><link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="libs/leaflet-1.3.1/leaflet.js"></script><link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="libs/proj4-2.6.2/proj4.min.js"></script><script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script><link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="libs/leaflet-binding-2.0.4.1/leaflet.js"></script><script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/mark.js@8.11.1/dist/mark.min.js"></script><!-- CSS -->
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Data Visualization</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome</a></li>
<li><a class="" href="syllabus.html">Syllabus</a></li>
<li><a class="" href="outline.html">Detailed outline</a></li>
<li><a class="" href="sync.html">Synchronous meeting agendas</a></li>
<li><a class="" href="evaluation.html">Evaluation</a></li>
<li><a class="" href="ch-invitation.html"><span class="header-section-number">1</span> Invitation to Data Visualization</a></li>
<li><a class="" href="ch-tools.html"><span class="header-section-number">2</span> Computer tools</a></li>
<li><a class="" href="setup.html"><span class="header-section-number">3</span> Setting up your computer</a></li>
<li><a class="" href="look-data.html"><span class="header-section-number">4</span> Look at Data</a></li>
<li><a class="" href="first-plot.html"><span class="header-section-number">5</span> Making your first plot</a></li>
<li><a class="" href="vcs.html"><span class="header-section-number">6</span> What is version control software?</a></li>
<li><a class="" href="grammar.html"><span class="header-section-number">7</span> Grammar of Graphics</a></li>
<li><a class="" href="ggplot.html"><span class="header-section-number">8</span> Using the grammar of graphics</a></li>
<li><a class="" href="summarizing-data.html"><span class="header-section-number">9</span> Summarizing data</a></li>
<li><a class="" href="facets.html"><span class="header-section-number">10</span> Facetted graphs</a></li>
<li><a class="" href="reading-data.html"><span class="header-section-number">11</span> Reading data</a></li>
<li><a class="" href="pivot.html"><span class="header-section-number">12</span> Reshaping data</a></li>
<li><a class="" href="format-tables.html"><span class="header-section-number">13</span> Format tables</a></li>
<li><a class="" href="help.html"><span class="header-section-number">14</span> Getting help and asking questions</a></li>
<li><a class="" href="working-models.html"><span class="header-section-number">15</span> Working with models</a></li>
<li><a class="" href="linear-models.html"><span class="header-section-number">16</span> Linear models</a></li>
<li><a class="" href="smoothing.html"><span class="header-section-number">17</span> GAM and LOESS smoothing</a></li>
<li><a class="" href="collaboration.html"><span class="header-section-number">18</span> Collaborating with GitHub</a></li>
<li><a class="" href="data-sources.html"><span class="header-section-number">19</span> Finding and accessing data</a></li>
<li><a class="" href="reproduce.html"><span class="header-section-number">20</span> Reproducible reports</a></li>
<li><a class="" href="pca.html"><span class="header-section-number">21</span> Principal component analysis</a></li>
<li><a class="" href="mds.html"><span class="header-section-number">22</span> Multidimensional scaling</a></li>
<li><a class="" href="k-means.html"><span class="header-section-number">23</span> K-means clustering</a></li>
<li><a class="" href="slides.html"><span class="header-section-number">24</span> Making slides for presentations</a></li>
<li><a class="active" href="dynamic.html"><span class="header-section-number">25</span> Dynamic graphics</a></li>
<li><a class="" href="mapping-1.html"><span class="header-section-number">26</span> Making maps</a></li>
<li><a class="" href="mapping-2.html"><span class="header-section-number">27</span> Mapping part two</a></li>
<li><a class="" href="mapping-3.html"><span class="header-section-number">28</span> Alternatives to maps</a></li>
<li><a class="" href="factors-dates.html"><span class="header-section-number">29</span> Working with factors and dates</a></li>
<li><a class="" href="colour.html"><span class="header-section-number">30</span> Using colour well</a></li>
<li><a class="" href="theme.html"><span class="header-section-number">31</span> Themes</a></li>
<li><a class="" href="output-files.html"><span class="header-section-number">32</span> Graphics formatting</a></li>
<li><a class="" href="organization.html"><span class="header-section-number">33</span> Staying organized</a></li>
<li><a class="" href="r-details.html"><span class="header-section-number">34</span> More details about R</a></li>
<li><a class="" href="accessibility-bias-and-ethics.html"><span class="header-section-number">35</span> Accessibility, Bias, and Ethics</a></li>
<li><a class="" href="metadata.html">Metadata</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/AndrewIrwin/data-visualization">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="dynamic" class="section level1" number="25">
<h1>
<span class="header-section-number">25</span> Dynamic graphics<a class="anchor" aria-label="anchor" href="#dynamic"><i class="fas fa-link"></i></a>
</h1>
<p>In this short lesson I’ll introduce two kinds of dynamic graphics. The first is a graphic that allows the reader to interact with the visualization. We’ve already seen 3d graphs that can be rotated, but you can also get information from hovering over data points. A second kind creates an animation to add another dimension (time) to the visualization. This can be helpful to “tell your story”, but it can also be challenging to get the speed of the animation right and to describe it effectively to an audience. That’s why Hans Rosling used his animation (way back in lesson 1) as part of an oral presentation.</p>
<div id="reader-interactions" class="section level2" number="25.1">
<h2>
<span class="header-section-number">25.1</span> Reader interactions<a class="anchor" aria-label="anchor" href="#reader-interactions"><i class="fas fa-link"></i></a>
</h2>
<p>Visualizations that are designed to respond to interactions (clicks, mouse movement) from the reader can show additional detail and provide opportunities for new ways of communication that are not possible with a static visualization. If you, as a creator of a visualization, require the reader to interact with your work to get the full meaning, you may find that your message is not communicated as effectively.</p>
<p>We will use the javascript plotly package, which is easily combined with ggplot graphics, to create some simple interactive visualizations.</p>
</div>
<div id="example-3" class="section level2" number="25.2">
<h2>
<span class="header-section-number">25.2</span> Example<a class="anchor" aria-label="anchor" href="#example-3"><i class="fas fa-link"></i></a>
</h2>
<p>The javascript package plot_ly can be used with R, both in Rstudio and in knitted HTML output. It automatically shows the coordinates of any point you aim your pointer at. It also provides the ability to pan and zoom the plot to focus in on part of the data. When you mouse is over the plot area, a menu appears at the top of the graph. Experiment with each control until you know what they all do.</p>
<p>plot_ly is a bit slow with a large dataset, so I’ll use a subset of the diamonds data.</p>
<div class="sourceCode" id="cb312"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">diamonds</span> <span class="op">%&gt;%</span> <span class="fu">slice_sample</span><span class="op">(</span>n <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">plot_ly</span><span class="op">(</span>x <span class="op">=</span> <span class="op">~</span> <span class="va">carat</span>, 
          y <span class="op">=</span> <span class="op">~</span> <span class="va">price</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">add_markers</span><span class="op">(</span>color <span class="op">=</span> <span class="op">~</span> <span class="va">color</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-d3f5d9f43b68afbc2673" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-d3f5d9f43b68afbc2673">{"x":{"visdat":{"9ac91d4767f9":["function () ","plotlyVisDat"]},"cur_data":"9ac91d4767f9","attrs":{"9ac91d4767f9":{"x":{},"y":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","mode":"markers","color":{},"inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"title":"carat"},"yaxis":{"domain":[0,1],"automargin":true,"title":"price"},"hovermode":"closest","showlegend":true},"source":"A","config":{"showSendToCloud":false},"data":[{"x":[2,0.61,1.23,0.77,0.32,0.71,0.43,1.05,1.05,0.76,2.57,1.19,2.29,1.08,0.47,2.02,1.75,1.59,1.15,1.79,1.13,1.04,0.5,0.4,1.07,1.11,0.59,0.53,1.03,1.59,0.4,0.36,0.52,0.72,2.42,0.4,1.51,0.76,0.3,0.4,2.38,1.56,1.16,1.01],"y":[13162,1233,6015,2001,480,1821,490,2789,4145,2015,18485,5390,13701,4173,953,9853,10681,8925,5125,10658,4371,3459,1035,1063,4235,3846,1330,1093,3634,8681,631,527,930,1864,16198,631,8033,2262,483,612,10716,8324,4028,3818],"type":"scatter","mode":"markers","name":"J","marker":{"color":"rgba(253,231,37,1)","line":{"color":"rgba(253,231,37,1)"}},"textfont":{"color":"rgba(253,231,37,1)"},"error_y":{"color":"rgba(253,231,37,1)"},"error_x":{"color":"rgba(253,231,37,1)"},"line":{"color":"rgba(253,231,37,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1.11,1.5,1.23,0.72,1.01,0.4,2.17,0.72,1.13,0.71,1.51,2.33,0.7,1.16,1.7,1.12,1.23,0.72,0.7,0.9,0.27,1.09,1.03,1.05,1.5,2.2,0.52,0.7,0.81,2.01,1.51,1.06,0.38,0.3,2.07,1.01,0.42,0.77,1.31,2.19,1.1,1.03,1.14,0.71,1.45,2.26,0.31,1.55,0.33,2.02,1.02,0.57,1.62,1.22,1,0.73,1.19,0.91,1.06,0.34,1.21,0.9,0.93,2.06,1.51,1.16,2,1.5,1.3,1.55,1.6,2,0.63,1.32,1.7,0.32,0.38,1.2,0.41,1.32,0.25,2.48,1.13,0.31,0.71,0.29,1.05,2.01,1.57,0.78,0.38,1.24,0.42,1.36,1.02,0.67,0.36,0.3],"y":[4817,8161,6206,2650,4413,982,17747,1799,5813,2028,8214,15073,1801,4869,12099,5392,5191,2539,1874,3398,432,6225,4162,4163,12725,14277,1214,2268,2386,16778,9116,5293,703,608,18193,2885,945,3066,5820,14819,4312,5378,4785,2052,9683,15606,489,9027,891,11119,2925,1097,9604,4714,4496,2144,4498,2976,3842,596,5865,3398,3946,15393,7362,4586,17607,6364,6714,11574,8377,17889,2064,5544,11257,589,703,7079,1056,7617,455,16820,6980,558,2327,384,4516,15475,10633,2834,812,6383,945,5963,3980,1882,624,540],"type":"scatter","mode":"markers","name":"I","marker":{"color":"rgba(143,215,68,1)","line":{"color":"rgba(143,215,68,1)"}},"textfont":{"color":"rgba(143,215,68,1)"},"error_y":{"color":"rgba(143,215,68,1)"},"error_x":{"color":"rgba(143,215,68,1)"},"line":{"color":"rgba(143,215,68,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1.18,0.31,1.21,2.09,2.5,1.11,1.25,0.7,0.52,0.96,1.01,0.31,0.31,1.16,1.46,0.32,0.33,0.93,0.62,1,1,0.33,0.36,0.32,0.91,0.34,1.01,0.74,0.4,0.54,0.71,0.44,0.7,0.32,1.5,1,1.05,0.31,1.04,0.61,0.76,1.6,0.39,1,0.26,0.7,1.51,0.7,1.58,0.3,0.38,0.52,0.57,1.21,0.3,0.62,1.2,0.91,1.12,1.06,1.61,1.16,0.52,1.48,0.33,1.51,1.01,1,0.72,0.59,1.09,2.18,0.31,2.22,0.3,1.04,0.71,0.32,0.72,0.33,0.74,1.28,1.01,0.31,0.5,0.72,0.32,0.9,0.51,0.51,1.23,0.33,0.4,0.58,0.76,1.5,0.32,0.9,0.8,1.3,1.5,1.74,0.82,1.42,0.75,1.09,2.02,0.28,2.21,0.41,0.55,0.32,0.37,0.9,1.02,0.7,1,0.7,0.71,2.02,0.65,0.9,0.9,0.81,2.01,1.59,1.2,1.2,0.31,0.32,0.51,0.31,0.91,1.11,0.56,1.5,2.38,0.3,0.72,0.3,0.31,1.5,0.31,0.34,1.5,1.63,0.7,0.4,0.79,0.3],"y":[5815,698,4249,17805,13278,3730,5810,3167,1625,3611,4873,489,628,4814,7604,482,743,4050,1878,4042,6022,730,505,648,3425,765,3959,2369,1125,1359,2049,1196,2862,434,6846,4574,5492,628,6694,1591,2227,12378,874,5208,491,3145,10548,2176,11262,540,702,1639,1292,5218,878,1652,5884,4128,5818,4120,9341,4979,1073,7244,965,10090,5664,4564,1674,1106,4349,16842,802,6564,631,3261,2055,505,1945,730,2264,7098,4242,698,1706,3283,828,3114,1435,1195,7130,579,596,1184,2517,14304,720,3024,2918,7498,7495,10874,3781,7316,2228,4700,13453,476,14299,961,1402,814,666,4838,4297,2536,4791,2051,2224,18236,2318,4133,4309,2972,18252,9385,4838,5846,502,505,1195,1046,4298,4028,1949,7187,16643,776,2131,608,507,10038,558,490,11557,10721,3325,954,2346,554],"type":"scatter","mode":"markers","name":"H","marker":{"color":"rgba(53,183,121,1)","line":{"color":"rgba(53,183,121,1)"}},"textfont":{"color":"rgba(53,183,121,1)"},"error_y":{"color":"rgba(53,183,121,1)"},"error_x":{"color":"rgba(53,183,121,1)"},"line":{"color":"rgba(53,183,121,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.33,1.35,0.92,1.31,0.3,0.57,0.32,0.52,0.35,1.01,0.51,0.54,0.43,0.81,0.78,1.01,0.3,0.73,0.93,0.41,0.82,0.31,0.77,0.36,1.03,1.31,0.3,1.29,0.69,0.7,0.32,0.82,0.55,0.51,0.32,0.4,1.23,1.01,0.71,0.9,3.01,0.3,1.59,0.31,0.4,1.01,0.32,0.5,1.59,0.3,0.42,0.42,1,0.47,1.01,1.02,1.01,0.31,0.32,0.5,0.3,1.14,0.5,1.02,0.49,2,1.01,0.54,1.5,0.9,1.71,0.41,0.58,2.18,1.02,1.34,0.31,0.7,1.5,0.9,0.91,1,0.51,0.76,0.41,0.31,0.5,1.12,1.51,1.06,1.25,0.92,0.3,1.66,0.33,1.28,0.74,1.3,0.7,0.33,1.82,0.52,0.56,1.01,0.7,2.04,0.3,0.35,0.33,0.5,1,0.51,1.51,0.3,0.76,0.5,0.7,1,1.03,0.9,1.2,0.31,0.5,0.52,0.71,0.33,0.42,0.4,0.4,0.33,0.56,0.31,1.11,0.3,1.01,1,0.23,1.26,0.56,0.41,1.24,1.02,1,1.72,0.72,1.04,0.41,0.73,1.33,1.01,1.13,1.33,1.77,1.01,0.43,1.29,0.44,1.54,1.53,1.25,0.5,0.91,0.31,0.36,1.54,1.06,0.42,0.55,1.5,0.7,0.35,0.54,1.53,0.38,0.31,0.34,0.51,0.72,0.31,1,0.9,0.35,0.34,1.27,0.64,0.33,0.42,0.42,0.24,0.31,0.41,1.5,0.27,0.3,0.33,0.39,0.32,1.08,0.61,1.09,0.32,1.71,0.34,1.01,0.72,0.3,0.57,0.42,1.51,1,1.04,0.7,0.35,1.51,0.39,1.01,1.51,1.24,0.39,1.34,1.51,0.33,2.04,0.51,1.2,0.54,0.9],"y":[666,9471,3916,10359,863,1608,918,1911,1116,6132,1813,1392,789,2274,2386,6587,447,3270,5879,964,2893,891,2896,726,5037,11389,605,4045,2235,2074,936,2339,2022,2005,561,655,5039,5113,2104,3774,14220,630,9794,658,792,7366,561,863,15843,863,687,687,6272,1086,3852,3904,4672,625,708,1838,1013,9037,1286,4552,1026,17740,6027,1809,12821,3718,18599,847,1911,12377,4633,11640,802,3451,8736,4008,3340,8115,1810,3212,1230,671,1449,4712,8794,4162,6399,3986,764,9123,965,11214,3922,8416,2631,666,11971,2012,1340,4588,1138,9727,863,1024,761,1559,6216,1052,9258,878,2800,1286,2987,3541,6659,5335,8698,408,1764,2012,2171,838,1235,877,877,713,2510,891,4755,878,6613,6465,537,10367,1915,1068,8584,5816,6290,18730,2679,6177,1007,3667,12255,6951,6644,6603,9664,3796,790,9105,828,9193,9747,6371,1074,3844,786,932,12800,6128,1400,1881,13820,2512,798,1847,15137,726,907,447,1974,1588,802,4956,4269,706,596,7133,2587,743,1400,1087,442,1046,698,18691,490,776,838,743,645,7862,1228,10065,918,11351,765,5497,2396,895,1340,984,10216,3833,8794,2995,849,10739,1009,5839,15164,7660,878,6583,11917,579,16389,1438,8545,1241,4314],"type":"scatter","mode":"markers","name":"G","marker":{"color":"rgba(33,144,140,1)","line":{"color":"rgba(33,144,140,1)"}},"textfont":{"color":"rgba(33,144,140,1)"},"error_y":{"color":"rgba(33,144,140,1)"},"error_x":{"color":"rgba(33,144,140,1)"},"line":{"color":"rgba(33,144,140,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.72,0.32,0.61,0.41,0.38,0.82,1.58,1.16,1,0.36,0.33,0.51,0.35,1.21,1.11,0.75,1.01,0.31,0.96,1.04,0.7,0.9,0.39,1.24,0.56,1.13,0.32,1.03,0.9,0.73,0.7,0.36,0.24,0.9,1.01,0.37,0.34,0.23,0.27,1.02,0.53,0.91,0.61,0.78,0.75,0.37,0.33,0.7,0.5,0.91,0.82,0.57,2.02,0.41,0.84,0.55,0.31,0.51,1.51,0.72,0.24,0.4,1.31,0.77,0.31,1.5,1.71,0.5,0.38,0.53,0.31,0.33,1.16,0.31,0.25,0.96,1.01,1.54,0.38,0.4,0.73,2,0.31,1.01,1.66,1.01,0.72,1.12,0.5,0.41,1.21,0.31,1.09,0.41,1.02,0.34,0.9,0.54,0.76,0.57,0.37,1.01,0.9,1.2,1.02,0.73,1.23,0.5,1.01,1.04,0.29,0.7,1.51,1.1,0.5,0.71,0.77,0.53,0.41,1.6,0.41,0.54,0.91,0.37,0.31,0.31,0.32,0.84,0.42,1.32,0.5,1.29,1.24,0.76,1.06,0.31,0.3,0.72,1.6,0.4,0.64,0.24,0.5,0.9,1,1.08,0.43,1.03,0.45,0.32,0.7,0.57,1.5,0.55,0.7,0.48,0.31,0.5,0.7,0.52,0.28,0.51,0.29,1.04,1.36,0.41,1.03,2.01,0.3,0.51,1.01,0.41,0.4,0.4,1,0.43,1.5,0.31,0.7,0.31,0.54,1.02,0.41,1.51,1.51,0.4],"y":[2300,645,2196,1192,915,3080,14044,6301,5292,828,666,1569,706,10283,5284,2933,4412,757,3688,6278,2812,4006,921,11716,953,9539,652,8133,4715,3211,2657,983,552,5324,4332,791,739,402,518,3754,1220,4892,1971,2477,2394,811,854,2591,1764,4054,4931,2507,17530,863,2656,1709,914,1601,15440,3004,492,1080,6676,2247,840,9236,8714,1286,1096,1578,959,901,7803,821,560,5767,9810,13735,746,1050,1631,17869,897,4276,6135,3897,3759,8074,1181,685,5243,979,11631,1007,5038,760,2316,1866,3257,1612,738,5174,3950,9442,4541,2346,11534,1404,8922,6361,715,2437,15226,7174,1626,3880,3108,2273,809,10472,1085,1404,5225,746,802,840,912,2863,1031,12736,1232,4824,11231,2287,4862,663,776,2158,8377,1050,1725,383,1447,4183,5864,8321,1580,4282,945,533,3053,1642,11405,1410,2394,1311,1046,1197,1806,2137,612,2098,858,7495,6597,703,9131,13275,1041,1744,6999,1151,1088,1088,4829,905,13160,802,2401,802,1563,5077,863,14247,14481,1080],"type":"scatter","mode":"markers","name":"F","marker":{"color":"rgba(49,104,142,1)","line":{"color":"rgba(49,104,142,1)"}},"textfont":{"color":"rgba(49,104,142,1)"},"error_y":{"color":"rgba(49,104,142,1)"},"error_x":{"color":"rgba(49,104,142,1)"},"line":{"color":"rgba(49,104,142,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1.05,0.75,0.7,0.91,0.31,0.52,1.01,0.5,0.72,1,0.29,0.52,0.41,0.27,0.37,0.58,0.5,0.76,0.43,0.73,1.33,0.5,0.23,1.5,0.31,0.32,0.72,0.7,1.04,1.11,1.01,1.01,1.02,0.27,0.41,0.7,1.01,0.32,0.93,0.41,0.31,0.8,1.08,0.34,0.72,0.51,0.31,0.59,0.91,0.71,0.36,1.7,0.41,0.34,0.9,0.29,1.1,0.32,0.76,1.01,0.42,0.38,1.51,1.02,1.51,0.33,0.3,0.4,0.32,0.53,1.51,0.5,0.31,0.39,0.32,0.31,0.74,0.73,0.51,0.55,0.46,0.41,1,0.5,0.31,0.53,0.23,0.33,1.51,0.32,0.71,0.27,1.01,0.35,0.4,0.31,0.36,1.14,0.74,0.59,0.3,0.71,0.43,0.82,0.9,0.71,0.21,0.7,0.23,0.64,1.01,0.43,0.61,1.01,0.8,0.34,0.3,0.34,0.23,0.38,1.01,1,0.43,1.08,0.51,0.7,0.3,0.42,0.7,0.3,0.76,1.3,0.36,0.4,1.21,0.9,0.7,0.3,0.41,0.3,0.3,0.72,1.01,1.51,0.57,0.92,0.72,0.35,0.35,1.55,0.9,0.6],"y":[3234,2868,2657,5252,938,1815,6335,1077,2815,3450,633,1229,930,659,844,2243,1098,3087,716,2902,12342,1801,505,14386,872,837,2498,2394,4486,7326,6522,5556,8303,371,904,2730,6399,842,4531,1153,544,3297,5080,477,3048,1640,421,1664,3842,3101,1013,15804,705,714,3599,555,3891,720,2858,4575,773,979,12644,4983,9343,984,844,1106,1018,2280,10012,1746,558,1026,524,734,2999,2796,1343,1665,1257,954,8176,1155,698,1653,543,579,9731,779,2573,622,5499,829,988,816,810,12647,2699,2145,1120,2511,948,3697,4125,2002,386,2757,680,1811,9089,1016,1368,4355,3890,565,526,692,505,1069,5339,4213,919,7672,1386,2777,600,958,2673,658,3401,13725,878,622,7334,4209,2263,911,1187,814,837,2376,4506,15025,2507,4258,2646,984,790,10851,5387,2065],"type":"scatter","mode":"markers","name":"E","marker":{"color":"rgba(68,58,131,1)","line":{"color":"rgba(68,58,131,1)"}},"textfont":{"color":"rgba(68,58,131,1)"},"error_y":{"color":"rgba(68,58,131,1)"},"error_x":{"color":"rgba(68,58,131,1)"},"line":{"color":"rgba(68,58,131,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.51,0.55,0.23,0.28,1,0.9,0.31,0.7,1.09,1.07,0.72,1.07,0.9,0.31,0.38,0.32,0.31,0.35,0.4,0.3,0.41,0.51,1.05,0.6,0.73,0.7,1.11,1.03,0.7,0.71,0.71,1.51,0.91,0.38,0.81,0.41,1.28,0.41,0.44,0.54,0.36,0.31,0.32,0.3,1.01,0.9,0.58,0.5,1,0.34,0.7,0.31,1.75,0.7,0.41,0.91,1.11,0.58,0.4,0.31,0.9,0.33,0.31,0.33,0.55,0.7,0.32,0.33,0.58,0.5,0.7,0.5,0.55,0.3,0.7,0.9,0.72,1.09,2.03,0.53,0.33,0.57,0.52,0.34,0.38,0.31,0.72,0.56,2,0.3,0.23,0.36,0.43,0.5,0.31,0.31,1.31,0.51,1.01,0.91,0.42,0.36,1.52,2.02,0.91,0.28,0.41,0.35,0.31,1,0.31,0.71,0.53,1.13,1.63,0.7,0.5,1.04,0.5,0.71,0.6,0.56,0.73,0.72,0.84,0.42,0.42,0.4,0.32,0.35,0.53,1.14,0.51,1.22,1.26,0.71,0.5,0.31,0.8,0.34,0.38,1.01,0.3],"y":[1623,1692,478,596,4626,4128,571,2551,5267,5767,3495,8359,3473,816,853,657,1248,669,891,772,1018,1387,5104,1774,3182,3737,7863,4478,2749,3518,2279,9627,3763,812,3353,683,6811,791,1235,1662,851,942,526,741,4472,4523,3741,1272,5880,698,4244,877,13363,2337,873,4228,12200,1720,890,571,5897,631,462,780,1295,3210,550,781,1436,1819,2553,1190,1796,552,3622,3578,3459,5258,12765,1566,692,2043,1600,1211,1867,565,3205,1723,17674,552,499,1094,963,1436,462,942,17496,1687,5443,3848,617,537,17659,15334,4439,487,792,644,942,5775,696,4482,2407,11477,10281,2167,1332,5708,2376,2913,1657,1814,4116,4082,3809,1388,756,917,589,829,1694,18112,2087,5721,5412,2743,1272,571,3154,481,983,5622,950],"type":"scatter","mode":"markers","name":"D","marker":{"color":"rgba(68,1,84,1)","line":{"color":"rgba(68,1,84,1)"}},"textfont":{"color":"rgba(68,1,84,1)"},"error_y":{"color":"rgba(68,1,84,1)"},"error_x":{"color":"rgba(68,1,84,1)"},"line":{"color":"rgba(68,1,84,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script><p>Plot_ly can do a lot more than this example shows, including animation. There is a lot of documentation you can find at the link under Further Reading.</p>
</div>
<div id="animations" class="section level2" number="25.3">
<h2>
<span class="header-section-number">25.3</span> Animations<a class="anchor" aria-label="anchor" href="#animations"><i class="fas fa-link"></i></a>
</h2>
<p>Let’s recreate a version of Rosling’s plot of life expectancy as a function of income over time.</p>
<p>First we’ll make the plot for just one year. Then we will animate the plot changing year over time in the animation.</p>
<div class="sourceCode" id="cb313"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gapminder</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fl">1957</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span><span class="op">)</span>, x <span class="op">=</span> <span class="fl">3.8</span>, y <span class="op">=</span> <span class="fl">50</span>, size <span class="op">=</span> <span class="fl">40</span>, color <span class="op">=</span> <span class="st">"lightgray"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">gdpPercap</span>,
             y <span class="op">=</span> <span class="va">lifeExp</span>,
             size <span class="op">=</span> <span class="va">pop</span>,
             color <span class="op">=</span> <span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_log10</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="155-dynamics-graphics_files/figure-html/unnamed-chunk-2-1.png" width="672"></div>
<p>Now we will use functions from the <code>gganimate</code> package to change year from one frame to the next. Here we use <code>transition_state</code> to change the plot along values of <code>year</code>. The animation is produced with just one function: <code>transition_time(year)</code> which uses the quantitative value of year to control the display of data over time. The code to show the year in the <code>geom_text</code> is not at all obvious.</p>
<div class="sourceCode" id="cb314"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">animation</span> <span class="op">&lt;-</span> <span class="va">gapminder</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/format.html">format</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, 
            x <span class="op">=</span> <span class="fl">3.8</span>, y <span class="op">=</span> <span class="fl">50</span>, 
            size <span class="op">=</span> <span class="fl">40</span>, color <span class="op">=</span> <span class="st">"lightgray"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">gdpPercap</span>,
             y <span class="op">=</span> <span class="va">lifeExp</span>,
             size <span class="op">=</span> <span class="va">pop</span>,
             color <span class="op">=</span> <span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_log10</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">transition_time</span><span class="op">(</span><span class="va">year</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Animation frame {frame} of {nframes}"</span><span class="op">)</span>
<span class="fu">animate</span><span class="op">(</span><span class="va">animation</span>, nframes <span class="op">=</span> <span class="fl">75</span><span class="op">)</span></code></pre></div>
<div class="inline-figure">
<img src="155-dynamics-graphics_files/figure-html/unnamed-chunk-3-1.gif"><!-- -->
</div>
</div>
<div id="further-reading-19" class="section level2" number="25.4">
<h2>
<span class="header-section-number">25.4</span> Further reading<a class="anchor" aria-label="anchor" href="#further-reading-19"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>Documentation for <a href="https://plotly.com/r/">plot_ly</a> graphics for R</li>
<li>Documentation for <a href="https://gganimate.com/index.html">gganimate</a>, the grammar of animations</li>
</ul>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="slides.html"><span class="header-section-number">24</span> Making slides for presentations</a></div>
<div class="next"><a href="mapping-1.html"><span class="header-section-number">26</span> Making maps</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#dynamic"><span class="header-section-number">25</span> Dynamic graphics</a></li>
<li><a class="nav-link" href="#reader-interactions"><span class="header-section-number">25.1</span> Reader interactions</a></li>
<li><a class="nav-link" href="#example-3"><span class="header-section-number">25.2</span> Example</a></li>
<li><a class="nav-link" href="#animations"><span class="header-section-number">25.3</span> Animations</a></li>
<li><a class="nav-link" href="#further-reading-19"><span class="header-section-number">25.4</span> Further reading</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/AndrewIrwin/data-visualization/blob/master/155-dynamics-graphics.rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/AndrewIrwin/data-visualization/edit/master/155-dynamics-graphics.rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Data Visualization</strong>" was written by Andrew Irwin. It was last built on 2021-02-25.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>
</html>
